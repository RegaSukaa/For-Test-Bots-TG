<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GaGBot - –í—ã—Ä–∞—Å—Ç–∏ —Å–≤–æ–π —Å–∞–¥!</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e0f7e0, #c8e6c9);
            color: #2e7d32;
            min-height: 100vh;
            padding: 15px;
            padding-bottom: 70px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
            background: #4caf50;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            color: white;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .balance-container {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
            font-weight: bold;
            font-size: 1.4rem;
            color: #388e3c;
        }
        
        .section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #1b5e20;
            text-align: center;
            border-bottom: 2px solid #c8e6c9;
            padding-bottom: 10px;
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .btn {
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .btn-shop {
            background: #ff9800;
        }
        
        .btn-inventory {
            background: #9c27b0;
        }
        
        .btn-sell {
            background: #f44336;
        }
        
        .btn-collect {
            background: #2196f3;
        }
        
        .btn-plant {
            background: #673ab7;
        }
        
        .plant-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .plant-item {
            background: #f1f8e9;
            border-radius: 10px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #4caf50;
        }
        
        .plant-info {
            flex: 1;
        }
        
        .plant-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 3px;
        }
        
        .plant-details {
            font-size: 0.9rem;
            color: #666;
        }
        
        .plant-action {
            margin-left: 10px;
        }
        
        .beds-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        
        .bed-slot {
            aspect-ratio: 1/1;
            background: #f1f8e9;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            border: 2px solid #c8e6c9;
            font-size: 0.8rem;
            text-align: center;
            padding: 5px;
        }
        
        .bed-slot.empty {
            background: #e8f5e9;
        }
        
        .bed-slot.growing {
            background: #fff8e1;
            border-color: #ffd54f;
        }
        
        .bed-slot.ready {
            background: #e8f5e9;
            border-color: #4caf50;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .bed-plant {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .bed-timer {
            font-size: 0.7rem;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            padding: 2px 5px;
            margin-top: 3px;
            white-space: nowrap;
            overflow: visible;
            text-overflow: clip;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 100%;
            width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
            color: #1b5e20;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 2rem;
            cursor: pointer;
            color: #f44336;
            font-weight: bold;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .lang-switcher {
            position: fixed;
            bottom: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .lang-btn {
            flex: 1;
            background: #2e7d32;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #4caf50;
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4caf50;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            animation: slideIn 0.3s, fadeOut 0.5s 2.5s;
        }
        
        .shop-timer {
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
            background: #e3f2fd;
            padding: 8px;
            border-radius: 10px;
        }
        
        @keyframes slideIn {
            from { top: -50px; opacity: 0; }
            to { top: 20px; opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @media (max-width: 480px) {
            .beds-container {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .button-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            h1 {
                font-size: 1.5rem;
            }
        }
        
        .welcome-modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 100%;
            width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .welcome-text {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .welcome-title {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 15px;
            color: #1b5e20;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="headerTitle">üå± GaGBot - –°–∞–¥–æ–≤–∞—è —Ñ–µ—Ä–º–∞</h1>
            <p id="headerSubtitle">–í—ã—Ä–∞—â–∏–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ —É—Ä–æ–∂–∞–π!</p>
        </header>
        
        <div class="balance-container">
            <div id="balanceText">üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance">20</span> –º–æ–Ω–µ—Ç</div>
        </div>
        
        <div class="section">
            <h2 class="section-title">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h2>
            <div class="button-grid">
                <button class="btn btn-shop" onclick="openShop()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
                <button class="btn btn-inventory" onclick="openInventory()">üì¶ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
                <button class="btn" onclick="openBeds()">ü™¥ –ú–æ–∏ –≥—Ä—è–¥–∫–∏</button>
                <button class="btn btn-collect" onclick="collectAll()">üåæ –°–æ–±—Ä–∞—Ç—å —É—Ä–æ–∂–∞–π</button>
                <button class="btn btn-plant" onclick="openPlanting()">üå± –ü–æ—Å–∞–¥–∏—Ç—å</button>
                <button class="btn btn-sell" onclick="openSelling()">üí∞ –ü—Ä–æ–¥–∞—Ç—å</button>
            </div>
        </div>
        
        <div class="section">
            <h2 class="section-title" id="bedsTitle">–ú–æ–∏ –≥—Ä—è–¥–∫–∏</h2>
            <div class="beds-container" id="bedsContainer">
                <!-- –ì—Ä—è–¥–∫–∏ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
        
        <div class="lang-switcher">
            <button class="lang-btn" onclick="setLanguage('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
            <button class="lang-btn" onclick="setLanguage('en')">üá¨üáß English</button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="shopModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('shopModal')">&times;</span>
            <h2 class="modal-title">üõí –ú–∞–≥–∞–∑–∏–Ω —Å–µ–º—è–Ω</h2>
            <div id="shopTimer" class="shop-timer"></div>
            <div id="shopItems">
                <!-- –¢–æ–≤–∞—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞ -->
            </div>
        </div>
    </div>
    
    <div id="inventoryModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('inventoryModal')">&times;</span>
            <h2 class="modal-title">üì¶ –í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            <div id="inventoryItems">
                <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
            </div>
        </div>
    </div>
    
    <div id="plantingModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('plantingModal')">&times;</span>
            <h2 class="modal-title">üå± –ü–æ—Å–∞–¥–∫–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π</h2>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ –≥—Ä—è–¥–∫—É –¥–ª—è –ø–æ—Å–∞–¥–∫–∏</p>
            <div id="plantingContent">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–æ—Å–∞–¥–∫–∏ -->
            </div>
        </div>
    </div>
    
    <div id="sellingModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('sellingModal')">&times;</span>
            <h2 class="modal-title">üí∞ –ü—Ä–æ–¥–∞–∂–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π</h2>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏</p>
            <div id="sellingContent">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ -->
            </div>
        </div>
    </div>
    
    <div id="plantInfoModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('plantInfoModal')">&times;</span>
            <h2 class="modal-title" id="plantInfoTitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—Ç–µ–Ω–∏–∏</h2>
            <div id="plantInfoContent">
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—Ç–µ–Ω–∏–∏ -->
            </div>
        </div>
    </div>
    
    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="welcomeModal" class="modal" style="display: none;">
        <div class="welcome-modal-content">
            <h2 class="welcome-title" id="welcomeTitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ GaGBot!</h2>
            <div class="welcome-text" id="welcomeTextRu">
                <p>üå± –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ GaGBot - –∏–≥—Ä—É-—Ñ–µ—Ä–º—É –≤ Telegram!</p>
                <p>üéÆ –í —ç—Ç–æ–π –∏–≥—Ä–µ –≤—ã –º–æ–∂–µ—Ç–µ:</p>
                <ul>
                    <li>–ü–æ–∫—É–ø–∞—Ç—å —Å–µ–º–µ–Ω–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ</li>
                    <li>–°–∞–∂–∞—Ç—å —Ä–∞—Å—Ç–µ–Ω–∏—è –Ω–∞ –≥—Ä—è–¥–∫–∞—Ö</li>
                    <li>–°–æ–±–∏—Ä–∞—Ç—å —É—Ä–æ–∂–∞–π</li>
                    <li>–ü—Ä–æ–¥–∞–≤–∞—Ç—å —Ä–∞—Å—Ç–µ–Ω–∏—è –∑–∞ –º–æ–Ω–µ—Ç—ã</li>
                    <li>–†–∞—Å—à–∏—Ä—è—Ç—å —Å–≤–æ—é —Ñ–µ—Ä–º—É</li>
                </ul>
                <p>üí° –ù–∞—á–Ω–∏—Ç–µ —Å –ø–æ–∫—É–ø–∫–∏ —Å–µ–º—è–Ω –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∏ –ø–æ—Å–∞–¥–∏—Ç–µ –∏—Ö –Ω–∞ –≥—Ä—è–¥–∫–∞—Ö. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ —É—Ä–æ–∂–∞—è –ø—Ä–æ–¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–µ –º–æ–Ω–µ—Ç!</p>
                <p>‚öôÔ∏è –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞.</p>
                <p>–£–¥–∞—á–∏ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –≤–∞—à–µ–π —Ñ–µ—Ä–º—ã! üåæ</p>
            </div>
            <div class="welcome-text" id="welcomeTextEn" style="display: none;">
                <p>üå± Welcome to GaGBot - a Telegram farming game!</p>
                <p>üéÆ In this game you can:</p>
                <ul>
                    <li>Buy seeds in the shop</li>
                    <li>Plant seeds in garden beds</li>
                    <li>Harvest crops</li>
                    <li>Sell plants for coins</li>
                    <li>Expand your farm</li>
                </ul>
                <p>üí° Start by buying seeds in the shop and planting them. After harvesting, sell your plants to earn more coins!</p>
                <p>‚öôÔ∏è You can switch language anytime at the bottom of the screen.</p>
                <p>Good luck with your farming adventure! üåæ</p>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="lang-btn" onclick="setWelcomeLang('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
                <button class="lang-btn" onclick="setWelcomeLang('en')">üá¨üáß English</button>
            </div>
            <button class="btn" onclick="closeModal('welcomeModal')" style="margin-top: 20px; width: 100%;">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.hide();
        
        // –ü–µ—Ä–µ–≤–æ–¥—ã
        const translations = {
            ru: {
                balance: "üí∞ –ë–∞–ª–∞–Ω—Å: ",
                shop: "üõí –ú–∞–≥–∞–∑–∏–Ω",
                inventory: "üì¶ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å",
                beds: "ü™¥ –ú–æ–∏ –≥—Ä—è–¥–∫–∏",
                collect: "üåæ –°–æ–±—Ä–∞—Ç—å —É—Ä–æ–∂–∞–π",
                plant: "üå± –ü–æ—Å–∞–¥–∏—Ç—å",
                sell: "üí∞ –ü—Ä–æ–¥–∞—Ç—å",
                sellAll: "üí∞ –ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë",
                mainMenu: "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
                myBeds: "–ú–æ–∏ –≥—Ä—è–¥–∫–∏",
                seedShop: "üõí –ú–∞–≥–∞–∑–∏–Ω —Å–µ–º—è–Ω",
                yourInventory: "üì¶ –í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å",
                planting: "üå± –ü–æ—Å–∞–¥–∫–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π",
                selling: "üí∞ –ü—Ä–æ–¥–∞–∂–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π",
                plantInfo: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—Ç–µ–Ω–∏–∏",
                buy: "–ö—É–ø–∏—Ç—å",
                selectSlot: "–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—è–¥–∫—É:",
                plantHere: "–ü–æ—Å–∞–¥–∏—Ç—å –∑–¥–µ—Å—å",
                sellFor: "–ü—Ä–æ–¥–∞—Ç—å –∑–∞",
                weight: "–í–µ—Å",
                fruits: "–ü–ª–æ–¥–æ–≤",
                pricePerKg: "–¶–µ–Ω–∞ –∑–∞ –∫–≥",
                seedPrice: "–¶–µ–Ω–∞ —Å–µ–º—è–Ω",
                growthTime: "–í—Ä–µ–º—è —Ä–æ—Å—Ç–∞",
                selectPlant: "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è",
                selectToSell: "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏",
                emptySlot: "–ü—É—Å—Ç–∞—è –≥—Ä—è–¥–∫–∞",
                free: "–°–≤–æ–±–æ–¥–Ω–æ",
                growing: "–†–∞—Å—Ç–µ—Ç",
                ready: "–ì–æ—Ç–æ–≤–æ!",
                collectAll: "–°–æ–±—Ä–∞—Ç—å –≤—Å–µ",
                collected: "–°–æ–±—Ä–∞–Ω–æ",
                planted: "–ü–æ—Å–∞–∂–µ–Ω–æ",
                sold: "–ü—Ä–æ–¥–∞–Ω–æ",
                notEnoughMoney: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!",
                notEnoughSeeds: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–µ–º—è–Ω!",
                slotOccupied: "–ì—Ä—è–¥–∫–∞ –∑–∞–Ω—è—Ç–∞!",
                inventoryEmpty: "–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç!",
                available: "–î–æ—Å—Ç—É–ø–Ω–æ:",
                shopUpdate: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ —á–µ—Ä–µ–∑:",
                bought: "–ö—É–ø–ª–µ–Ω–æ",
                coins: "–º–æ–Ω–µ—Ç",
                refreshIn: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑:",
                title: "üå± GaGBot - –°–∞–¥–æ–≤–∞—è —Ñ–µ—Ä–º–∞",
                subtitle: "–í—ã—Ä–∞—â–∏–≤–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ —É—Ä–æ–∂–∞–π!",
                noPlantsToSell: "–ù–µ—Ç —Ä–∞—Å—Ç–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏",
                seed: "–°–µ–º—è"
            },
            en: {
                balance: "üí∞ Balance: ",
                shop: "üõí Shop",
                inventory: "üì¶ Inventory",
                beds: "ü™¥ My Beds",
                collect: "üåæ Harvest",
                plant: "üå± Plant",
                sell: "üí∞ Sell",
                sellAll: "üí∞ Sell All",
                mainMenu: "Main Menu",
                myBeds: "My Garden Beds",
                seedShop: "üõí Seed Shop",
                yourInventory: "üì¶ Your Inventory",
                planting: "üå± Planting",
                selling: "üí∞ Selling",
                plantInfo: "Plant Information",
                buy: "Buy",
                selectSlot: "Select a bed:",
                plantHere: "Plant Here",
                sellFor: "Sell for",
                weight: "Weight",
                fruits: "Fruits",
                pricePerKg: "Price per kg",
                seedPrice: "Seed price",
                growthTime: "Growth time",
                selectPlant: "Select a plant from inventory",
                selectToSell: "Select a plant to sell",
                emptySlot: "Empty bed",
                free: "Free",
                growing: "Growing",
                ready: "Ready!",
                collectAll: "Harvest All",
                collected: "Collected",
                planted: "Planted",
                sold: "Sold",
                notEnoughMoney: "Not enough money!",
                notEnoughSeeds: "Not enough seeds!",
                slotOccupied: "Bed is occupied!",
                inventoryEmpty: "Inventory is empty!",
                available: "Available:",
                shopUpdate: "Shop update in:",
                bought: "Bought",
                coins: "coins",
                refreshIn: "Refresh in:",
                title: "üå± GaGBot - Garden Farm",
                subtitle: "Grow plants and harvest!",
                noPlantsToSell: "No plants to sell",
                seed: "Seed"
            }
        };
        
        let currentLang = 'ru';
        let shopRefreshTimer = null;
        let shopRefreshTime = 300; // 5 –º–∏–Ω—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        
        // –ö–ª–∞—Å—Å —Ä–∞—Å—Ç–µ–Ω–∏—è
        class Plant {
            constructor(name, min_weight, max_weight, price_per_kg, seed_price, grow_time, availability_chance, repeat_growth = false, fruit_count = 1) {
                this.name = name;
                this.min_weight = min_weight;
                this.max_weight = max_weight;
                this.price_per_kg = price_per_kg;
                this.seed_price = seed_price;
                this.grow_time = grow_time * 1000; // –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
                this.fruit_count = fruit_count;
                this.current_fruits = 0;
                this.fruits_to_grow = fruit_count;
                this.current_weight = 0.0;
                this.growing = false;
                this.availability_chance = availability_chance;
                this.available_quantity = 0;
                this.repeat_growth = repeat_growth;
                this.plantedAt = 0;
                this.growthProgress = 0;
            }
            
            startGrowth() {
                this.growing = true;
                this.plantedAt = Date.now();
                this.growthProgress = 0;
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–æ—Å—Ç
                this.growInterval = setInterval(() => {
                    this.growthProgress = Math.min(100, ((Date.now() - this.plantedAt) / this.grow_time) * 100);
                    
                    if (this.growthProgress >= 100) {
                        this.finishGrowth();
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º UI –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                    updateBeds();
                }, 1000);
            }
            
            finishGrowth() {
                clearInterval(this.growInterval);
                this.current_weight = this.randomFloat(this.min_weight, this.max_weight);
                this.current_fruits += 1;
                this.fruits_to_grow -= 1;
                this.growing = false;
                
                // –ï—Å–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–µ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ, –∑–∞–ø—É—Å–∫–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ü–∏–∫–ª —Ä–æ—Å—Ç–∞
                if (this.repeat_growth && this.fruits_to_grow > 0) {
                    this.startGrowth();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–æ—Å—Ç–∞
                updateUI();
            }
            
            randomFloat(min, max) {
                return parseFloat((Math.random() * (max - min) + min).toFixed(2));
            }
            
            isGrown() {
                return !this.growing && this.current_fruits > 0;
            }
            
            getSellPrice() {
                return parseFloat((this.price_per_kg * this.current_weight * this.current_fruits).toFixed(2));
            }
            
            getTimeLeft() {
                if (!this.growing) return 0;
                const elapsed = Date.now() - this.plantedAt;
                return Math.max(0, this.grow_time - elapsed);
            }
        }
        
        // –ö–ª–∞—Å—Å —Ñ–µ—Ä–º—ã (–∏–≥—Ä–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
        class Farm {
            constructor() {
                this.balance = 20; // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ 20
                this.slots = 30;
                this.plants = Array(this.slots).fill(null);
                
                this.plantTypes = [
                    new Plant("ü•ï –ú–æ—Ä–∫–æ–≤—å", 0.1, 2, 40, 10, 5, 1),
                    new Plant("üçÖ –ü–æ–º–∏–¥–æ—Ä", 3, 9, 60, 800, 40, 1, true, 3),
                    new Plant("ü•î –ö–∞—Ä—Ç–æ—à–∫–∞", 0.01, 0.2, 17000, 600, 20, 0.35),
                    new Plant("ü•í –û–≥—É—Ä–µ—Ü", 2, 23, 1051, 4000, 300, 0.3),
                    new Plant("ü•¨ –°–∞–ª–∞—Ç", 0.1, 0.6, 6000, 1000, 60, 0.07),
                    new Plant("ü•≠ –ú–∞–Ω–≥–æ", 10, 20, 3000, 100000, 500, 0.02, true, 5),
                    new Plant("üçá –í–∏–Ω–æ–≥—Ä–∞–¥", 3, 9, 3492.5, 850000, 400, 0.01, true, 7),
                    new Plant("üçì –ö–ª—É–±–Ω–∏–∫–∞", 0.21, 1.92, 60, 50, 8, 1, true, 3),
                    new Plant("üçâ –ê—Ä–±—É–∑", 3, 15, 600, 2500, 200, 0.12),
                    new Plant("üçë –ü–µ—Ä—Å–∏–∫", 5.64, 52.45, 660, 8000, 200, 0.35, true, 3),
                    new Plant("ü•• –ö–æ–∫–æ—Å", 10, 50, 504, 6000, 25200, 0.35, true, 20),
                    new Plant("ü•ù –ö–∏–≤–∏", 1, 1.21, 410, 8000, 120, 0.45),
                    new Plant("üçà –î—ã–Ω—è", 1, 2, 27, 1300, 25, 0.16, true),
                    new Plant("üçí –í–∏—à–Ω—è", 0.1, 1, 120, 400, 22, 1, true, 6),
                    new Plant("üå∞ –û—Ä–µ—Ö", 1, 5, 100, 3250, 160, 0.1, true, 6),
                    new Plant("üå∂Ô∏è –ü–µ—Ä–µ—Ü", 1, 4, 3811, 1000000, 60, 0.01, true, 6),
                    new Plant("üåΩ –°–≤–µ–∫–ª–∞", 2, 6, 1650, 16000, 320, 0.16, true)
                ];
                
                this.inventory = [];
                this.loadGame();
                this.updateShop();
            }
            
            updateShop() {
                for (const plant of this.plantTypes) {
                    if (Math.random() < plant.availability_chance) {
                        plant.available_quantity = Math.floor(Math.random() * 5) + 1;
                    } else {
                        plant.available_quantity = 0;
                    }
                }
                this.saveGame();
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
                shopRefreshTime = 300;
            }
            
            buySeed(plantIndex, quantity) {
                const plant = this.plantTypes[plantIndex];
                if (plant.available_quantity >= quantity) {
                    const totalCost = plant.seed_price * quantity;
                    if (this.balance >= totalCost) {
                        this.balance -= totalCost;
                        plant.available_quantity -= quantity;
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–º–µ–Ω–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                        for (let i = 0; i < quantity; i++) {
                            const seed = new Plant(
                                plant.name, 
                                plant.min_weight, 
                                plant.max_weight, 
                                plant.price_per_kg, 
                                plant.seed_price, 
                                plant.grow_time / 1000, 
                                plant.availability_chance,
                                plant.repeat_growth,
                                plant.fruit_count
                            );
                            this.inventory.push(seed);
                        }
                        
                        this.showNotification(`${translations[currentLang].bought} ${quantity} ${plant.name} –∑–∞ ${totalCost} ${translations[currentLang].coins}`);
                        this.saveGame();
                        updateUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É
                        return true;
                    } else {
                        this.showNotification(translations[currentLang].notEnoughMoney);
                        return false;
                    }
                } else {
                    this.showNotification(translations[currentLang].notEnoughSeeds);
                    return false;
                }
            }
            
            sellPlant(inventoryIndex) {
                if (inventoryIndex >= 0 && inventoryIndex < this.inventory.length) {
                    const plant = this.inventory[inventoryIndex];
                    if (plant.isGrown()) {
                        const price = plant.getSellPrice();
                        this.balance += price;
                        this.inventory.splice(inventoryIndex, 1);
                        this.showNotification(`${translations[currentLang].sold} ${plant.name} ${translations[currentLang].sellFor} ${price} üí∞`);
                        this.saveGame();
                        updateUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É
                        return true;
                    }
                }
                return false;
            }
            
            sellAllPlants() {
                let total = 0;
                let soldCount = 0;
                
                // –ü—Ä–æ–¥–∞–µ–º —Å –∫–æ–Ω—Ü–∞, —á—Ç–æ–±—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–µ —Å–¥–≤–∏–≥–∞–ª–∏—Å—å
                for (let i = this.inventory.length - 1; i >= 0; i--) {
                    const plant = this.inventory[i];
                    if (plant.isGrown()) {
                        total += plant.getSellPrice();
                        this.inventory.splice(i, 1);
                        soldCount++;
                    }
                }
                
                if (soldCount > 0) {
                    this.balance += total;
                    this.showNotification(`${translations[currentLang].sold} ${soldCount} ${translations[currentLang].sellFor} ${total} ${translations[currentLang].coins}`);
                    this.saveGame();
                    updateUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É
                    return true;
                } else {
                    this.showNotification(translations[currentLang].noPlantsToSell);
                    return false;
                }
            }
            
            plantGrowth(slotIndex, seed) {
                if (this.plants[slotIndex] === null) {
                    const plant = new Plant(
                        seed.name, 
                        seed.min_weight, 
                        seed.max_weight, 
                        seed.price_per_kg, 
                        seed.seed_price, 
                        seed.grow_time / 1000, 
                        seed.availability_chance,
                        seed.repeat_growth,
                        seed.fruit_count
                    );
                    
                    // –£–¥–∞–ª—è–µ–º —Å–µ–º—è –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                    const seedIndex = this.inventory.indexOf(seed);
                    if (seedIndex !== -1) {
                        this.inventory.splice(seedIndex, 1);
                    }
                    
                    this.plants[slotIndex] = plant;
                    plant.startGrowth();
                    this.showNotification(`${translations[currentLang].planted} ${plant.name}`);
                    this.saveGame();
                    updateUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É
                    return true;
                } else {
                    this.showNotification(translations[currentLang].slotOccupied);
                    return false;
                }
            }
            
            collectPlants() {
                let collected = 0;
                for (let i = 0; i < this.plants.length; i++) {
                    const plant = this.plants[i];
                    if (plant && plant.isGrown()) {
                        // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞—Å—Ç–µ–Ω–∏–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                        this.inventory.push(plant);
                        
                        // –ï—Å–ª–∏ —Ä–∞—Å—Ç–µ–Ω–∏–µ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                        if (plant.repeat_growth && plant.fruits_to_grow > 0) {
                            plant.current_fruits = 0;
                            plant.startGrowth();
                        } else {
                            this.plants[i] = null;
                        }
                        collected++;
                    }
                }
                
                if (collected > 0) {
                    this.showNotification(`${translations[currentLang].collected} ${collected} —Ä–∞—Å—Ç–µ–Ω–∏–π!`);
                } else {
                    this.showNotification("–ù–µ—Ç —Ä–∞—Å—Ç–µ–Ω–∏–π –¥–ª—è —Å–±–æ—Ä–∞");
                }
                
                this.saveGame();
                updateUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É
                return collected;
            }
            
            saveGame() {
                const gameData = {
                    balance: this.balance,
                    plants: this.plants.map(plant => plant ? this.serializePlant(plant) : null),
                    inventory: this.inventory.map(plant => this.serializePlant(plant)),
                    plantTypes: this.plantTypes.map(plant => ({
                        available_quantity: plant.available_quantity
                    })),
                    shopRefreshTime: shopRefreshTime
                };
                localStorage.setItem('farmGame', JSON.stringify(gameData));
            }
            
            loadGame() {
                const savedData = localStorage.getItem('farmGame');
                if (savedData) {
                    const gameData = JSON.parse(savedData);
                    this.balance = gameData.balance || 20;
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
                    shopRefreshTime = gameData.shopRefreshTime || 300;
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞—Å—Ç–µ–Ω–∏—è –Ω–∞ –≥—Ä—è–¥–∫–∞—Ö
                    this.plants = gameData.plants.map(plantData => {
                        if (!plantData) return null;
                        const plant = this.deserializePlant(plantData);
                        if (plant.growing) {
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–∞–¥–∫–∏
                            const timePassed = Date.now() - plantData.plantedAt;
                            if (timePassed >= plant.grow_time) {
                                plant.finishGrowth();
                            } else {
                                // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–æ—Å—Ç
                                plant.plantedAt = plantData.plantedAt;
                                plant.growthProgress = (timePassed / plant.grow_time) * 100;
                                plant.growInterval = setInterval(() => {
                                    plant.growthProgress = Math.min(100, ((Date.now() - plant.plantedAt) / plant.grow_time) * 100);
                                    if (plant.growthProgress >= 100) {
                                        plant.finishGrowth();
                                    }
                                }, 1000);
                            }
                        }
                        return plant;
                    });
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                    this.inventory = gameData.inventory.map(plantData => this.deserializePlant(plantData));
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–≥–∞–∑–∏–Ω
                    if (gameData.plantTypes) {
                        for (let i = 0; i < gameData.plantTypes.length; i++) {
                            this.plantTypes[i].available_quantity = gameData.plantTypes[i].available_quantity;
                        }
                    }
                }
            }
            
            serializePlant(plant) {
                return {
                    name: plant.name,
                    min_weight: plant.min_weight,
                    max_weight: plant.max_weight,
                    price_per_kg: plant.price_per_kg,
                    seed_price: plant.seed_price,
                    grow_time: plant.grow_time,
                    fruit_count: plant.fruit_count,
                    current_fruits: plant.current_fruits,
                    fruits_to_grow: plant.fruits_to_grow,
                    current_weight: plant.current_weight,
                    growing: plant.growing,
                    availability_chance: plant.availability_chance,
                    repeat_growth: plant.repeat_growth,
                    plantedAt: plant.plantedAt,
                    growthProgress: plant.growthProgress
                };
            }
            
            deserializePlant(plantData) {
                const plant = new Plant(
                    plantData.name,
                    plantData.min_weight,
                    plantData.max_weight,
                    plantData.price_per_kg,
                    plantData.seed_price,
                    plantData.grow_time / 1000,
                    plantData.availability_chance,
                    plantData.repeat_growth,
                    plantData.fruit_count
                );
                
                plant.current_fruits = plantData.current_fruits;
                plant.fruits_to_grow = plantData.fruits_to_grow;
                plant.current_weight = plantData.current_weight;
                plant.growing = plantData.growing;
                plant.plantedAt = plantData.plantedAt;
                plant.growthProgress = plantData.growthProgress;
                
                return plant;
            }
        }
        
        // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä —Ñ–µ—Ä–º—ã
        const farm = new Farm();
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const balanceElement = document.getElementById('balance');
        const balanceText = document.getElementById('balanceText');
        const bedsContainer = document.getElementById('bedsContainer');
        const headerTitle = document.getElementById('headerTitle');
        const headerSubtitle = document.getElementById('headerSubtitle');
        const bedsTitle = document.getElementById('bedsTitle');
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            balanceElement.textContent = farm.balance.toLocaleString();
            balanceText.textContent = translations[currentLang].balance + farm.balance.toLocaleString() + " " + translations[currentLang].coins;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            headerTitle.textContent = translations[currentLang].title;
            headerSubtitle.textContent = translations[currentLang].subtitle;
            bedsTitle.textContent = translations[currentLang].myBeds;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä—è–¥–∫–∏
            updateBeds();
        }
        
        function updateBeds() {
            bedsContainer.innerHTML = '';
            farm.plants.forEach((plant, index) => {
                const bed = document.createElement('div');
                bed.className = 'bed-slot';
                
                if (plant) {
                    if (plant.isGrown()) {
                        bed.classList.add('ready');
                        bed.innerHTML = `
                            <div class="bed-plant">${getPlantEmoji(plant.name)}</div>
                            <div>${translations[currentLang].ready}</div>
                            <div class="plant-details">${plant.current_fruits} ${translations[currentLang].fruits}</div>
                        `;
                    } else if (plant.growing) {
                        bed.classList.add('growing');
                        const timeLeft = plant.getTimeLeft();
                        const minutes = Math.floor(timeLeft / 60000);
                        const seconds = Math.floor((timeLeft % 60000) / 1000);
                        
                        bed.innerHTML = `
                            <div class="bed-plant">${getPlantEmoji(plant.name)}</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${plant.growthProgress}%"></div>
                            </div>
                            <div class="bed-timer">${minutes}–º ${seconds}—Å</div>
                        `;
                    }
                } else {
                    bed.classList.add('empty');
                    bed.textContent = `${index + 1}\n${translations[currentLang].free}`;
                }
                
                bed.onclick = () => openBedInfo(index);
                bedsContainer.appendChild(bed);
            });
        }
        
        function getPlantEmoji(name) {
            // –ò–∑–≤–ª–µ–∫–∞–µ–º —ç–º–æ–¥–∑–∏ –∏–∑ –Ω–∞—á–∞–ª–∞ –Ω–∞–∑–≤–∞–Ω–∏—è
            const emojiMatch = name.match(/^[\u{1F300}-\u{1F9FF}]{1,3}/u);
            return emojiMatch ? emojiMatch[0] : 'üå±';
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function openShop() {
            const shopItems = document.getElementById('shopItems');
            shopItems.innerHTML = '';
            
            // –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
            const timerElement = document.getElementById('shopTimer');
            const minutes = Math.floor(shopRefreshTime / 60);
            const seconds = shopRefreshTime % 60;
            timerElement.innerHTML = `${translations[currentLang].refreshIn} ${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
            
            farm.plantTypes.forEach((plant, index) => {
                if (plant.available_quantity > 0) {
                    const item = document.createElement('div');
                    item.className = 'plant-item';
                    item.innerHTML = `
                        <div class="plant-info">
                            <div class="plant-name">${plant.name}</div>
                            <div class="plant-details">
                                ${translations[currentLang].pricePerKg}: ${plant.price_per_kg} | 
                                ${translations[currentLang].seedPrice}: ${plant.seed_price} | 
                                ${translations[currentLang].growthTime}: ${plant.grow_time / 1000}s
                            </div>
                            <div>${translations[currentLang].available}: ${plant.available_quantity}</div>
                        </div>
                        <div class="plant-action">
                            <button class="btn" onclick="buySeed(${index})">${translations[currentLang].buy}</button>
                        </div>
                    `;
                    shopItems.appendChild(item);
                }
            });
            
            if (shopItems.innerHTML === '') {
                shopItems.innerHTML = '<p>–í –º–∞–≥–∞–∑–∏–Ω–µ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ–º—è–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>';
            }
            
            document.getElementById('shopModal').style.display = 'flex';
        }
        
        function openInventory() {
            const inventoryItems = document.getElementById('inventoryItems');
            inventoryItems.innerHTML = '';
            
            if (farm.inventory.length === 0) {
                inventoryItems.innerHTML = `<p>${translations[currentLang].inventoryEmpty}</p>`;
            } else {
                farm.inventory.forEach((plant, index) => {
                    const item = document.createElement('div');
                    item.className = 'plant-item';
                    
                    let details = '';
                    if (plant.isGrown()) {
                        details = `${translations[currentLang].weight}: ${plant.current_weight}kg | ${translations[currentLang].sellFor}: ${plant.getSellPrice()}`;
                    } else {
                        details = translations[currentLang].seed;
                    }
                    
                    item.innerHTML = `
                        <div class="plant-info">
                            <div class="plant-name">${plant.name}</div>
                            <div class="plant-details">${details}</div>
                        </div>
                        <div class="plant-action">
                            <button class="btn" onclick="showPlantInfo(${index})">‚ÑπÔ∏è</button>
                        </div>
                    `;
                    inventoryItems.appendChild(item);
                });
            }
            
            document.getElementById('inventoryModal').style.display = 'flex';
        }
        
        function openPlanting() {
            const plantingContent = document.getElementById('plantingContent');
            plantingContent.innerHTML = '';
            
            if (farm.inventory.length === 0) {
                plantingContent.innerHTML = `<p>${translations[currentLang].inventoryEmpty}</p>`;
                document.getElementById('plantingModal').style.display = 'flex';
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—Ç–µ–Ω–∏–π
            const selectPlant = document.createElement('select');
            selectPlant.id = 'plantSelect';
            selectPlant.className = 'btn';
            selectPlant.style.width = '100%';
            selectPlant.style.marginBottom = '20px';
            
            farm.inventory.forEach((plant, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = plant.name;
                selectPlant.appendChild(option);
            });
            
            plantingContent.innerHTML = `<p>${translations[currentLang].selectPlant}</p>`;
            plantingContent.appendChild(selectPlant);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥—Ä—è–¥–∫–∏
            const slotTitle = document.createElement('h3');
            slotTitle.textContent = translations[currentLang].selectSlot;
            plantingContent.appendChild(slotTitle);
            
            // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≥—Ä—è–¥–æ–∫
            const slotsContainer = document.createElement('div');
            slotsContainer.className = 'beds-container';
            slotsContainer.style.marginTop = '10px';
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—è–¥–∫–∏
            farm.plants.forEach((plant, index) => {
                const slotBtn = document.createElement('button');
                slotBtn.className = 'bed-slot';
                slotBtn.style.cursor = 'pointer';
                
                if (plant) {
                    if (plant.isGrown()) {
                        slotBtn.classList.add('ready');
                        slotBtn.innerHTML = `<div>${getPlantEmoji(plant.name)}</div><div>${index + 1}</div>`;
                    } else if (plant.growing) {
                        slotBtn.classList.add('growing');
                        slotBtn.innerHTML = `<div>${getPlantEmoji(plant.name)}</div><div>${index + 1}</div>`;
                    }
                } else {
                    slotBtn.classList.add('empty');
                    slotBtn.innerHTML = `<div>${index + 1}</div><div>${translations[currentLang].free}</div>`;
                    slotBtn.onclick = () => {
                        const plantIndex = parseInt(document.getElementById('plantSelect').value);
                        if (farm.plantGrowth(index, farm.inventory[plantIndex])) {
                            closeModal('plantingModal');
                        }
                    };
                }
                
                slotsContainer.appendChild(slotBtn);
            });
            
            plantingContent.appendChild(slotsContainer);
            document.getElementById('plantingModal').style.display = 'flex';
        }
        
        function openSelling() {
            const sellingContent = document.getElementById('sellingContent');
            sellingContent.innerHTML = '';
            
            if (farm.inventory.length === 0) {
                sellingContent.innerHTML = `<p>${translations[currentLang].inventoryEmpty}</p>`;
                document.getElementById('sellingModal').style.display = 'flex';
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—Ç–µ–Ω–∏–π
            const selectPlant = document.createElement('select');
            selectPlant.id = 'sellPlantSelect';
            selectPlant.className = 'btn';
            selectPlant.style.width = '100%';
            selectPlant.style.marginBottom = '20px';
            
            farm.inventory.forEach((plant, index) => {
                if (plant.isGrown()) {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${plant.name} (${translations[currentLang].sellFor}: ${plant.getSellPrice()})`;
                    selectPlant.appendChild(option);
                }
            });
            
            if (selectPlant.options.length === 0) {
                sellingContent.innerHTML = '<p>–ù–µ—Ç —Ä–∞—Å—Ç–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏. –°–Ω–∞—á–∞–ª–∞ —Å–æ–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∂–∞–π.</p>';
            } else {
                sellingContent.innerHTML = `<p>${translations[currentLang].selectToSell}</p>`;
                sellingContent.appendChild(selectPlant);
                
                const sellButton = document.createElement('button');
                sellButton.className = 'btn btn-sell';
                sellButton.textContent = translations[currentLang].sell;
                sellButton.style.width = '100%';
                sellButton.onclick = () => {
                    const plantIndex = parseInt(document.getElementById('sellPlantSelect').value);
                    farm.sellPlant(plantIndex);
                };
                
                // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë"
                const sellAllButton = document.createElement('button');
                sellAllButton.className = 'btn btn-sell';
                sellAllButton.textContent = translations[currentLang].sellAll;
                sellAllButton.style.width = '100%';
                sellAllButton.style.marginTop = '10px';
                sellAllButton.onclick = () => {
                    farm.sellAllPlants();
                };
                
                sellingContent.appendChild(sellButton);
                sellingContent.appendChild(sellAllButton);
            }
            
            document.getElementById('sellingModal').style.display = 'flex';
        }
        
        function showPlantInfo(index) {
            const plant = farm.inventory[index];
            if (!plant) return;
            
            document.getElementById('plantInfoTitle').textContent = plant.name;
            const content = document.getElementById('plantInfoContent');
            
            let infoHTML = '';
            if (plant.isGrown()) {
                infoHTML = `
                    <p>${translations[currentLang].weight}: ${plant.current_weight} –∫–≥</p>
                    <p>${translations[currentLang].fruits}: ${plant.current_fruits}</p>
                    <p>${translations[currentLang].sellFor}: ${plant.getSellPrice()} ${translations[currentLang].coins}</p>
                    <p>${translations[currentLang].pricePerKg}: ${plant.price_per_kg}</p>
                `;
            } else {
                infoHTML = `
                    <p>${translations[currentLang].seed}</p>
                    <p>${translations[currentLang].seedPrice}: ${plant.seed_price} ${translations[currentLang].coins}</p>
                    <p>${translations[currentLang].growthTime}: ${plant.grow_time / 1000} —Å–µ–∫</p>
                `;
            }
            
            content.innerHTML = infoHTML;
            document.getElementById('plantInfoModal').style.display = 'flex';
        }
        
        function openBedInfo(index) {
            const plant = farm.plants[index];
            if (!plant) return;
            
            document.getElementById('plantInfoTitle').textContent = plant.name;
            const content = document.getElementById('plantInfoContent');
            
            let infoHTML = '';
            if (plant.isGrown()) {
                infoHTML = `
                    <p>${translations[currentLang].ready}</p>
                    <p>${translations[currentLang].fruits}: ${plant.current_fruits}</p>
                    <p>${translations[currentLang].weight}: ${plant.current_weight} –∫–≥</p>
                    <p>${translations[currentLang].sellFor}: ${plant.getSellPrice()} ${translations[currentLang].coins}</p>
                `;
            } else if (plant.growing) {
                const timeLeft = plant.getTimeLeft();
                const minutes = Math.floor(timeLeft / 60000);
                const seconds = Math.floor((timeLeft % 60000) / 1000);
                
                infoHTML = `
                    <p>${translations[currentLang].growing}</p>
                    <p>–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: ${minutes} –º–∏–Ω ${seconds} —Å–µ–∫</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${plant.growthProgress}%"></div>
                    </div>
                `;
            }
            
            content.innerHTML = infoHTML;
            document.getElementById('plantInfoModal').style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function buySeed(plantIndex) {
            farm.buySeed(plantIndex, 1);
        }
        
        function collectAll() {
            farm.collectPlants();
        }
        
        function setLanguage(lang) {
            currentLang = lang;
            applyTranslations();
            updateUI();
        }
        
        function applyTranslations() {
            const trans = translations[currentLang];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
            document.querySelector('.btn-shop').textContent = trans.shop;
            document.querySelector('.btn-inventory').textContent = trans.inventory;
            document.querySelector('.btn-collect').textContent = trans.collect;
            document.querySelector('.btn-plant').textContent = trans.plant;
            document.querySelector('.btn-sell').textContent = trans.sell;
            
            document.querySelectorAll('.section-title')[0].textContent = trans.mainMenu;
            
            document.getElementById('shopModal').querySelector('.modal-title').textContent = trans.seedShop;
            document.getElementById('inventoryModal').querySelector('.modal-title').textContent = trans.yourInventory;
            document.getElementById('plantingModal').querySelector('.modal-title').textContent = trans.planting;
            document.getElementById('sellingModal').querySelector('.modal-title').textContent = trans.selling;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ –æ–∫–Ω–µ –ø–æ—Å–∞–¥–∫–∏
            const plantingContent = document.querySelector('#plantingModal p');
            if (plantingContent) {
                plantingContent.textContent = trans.selectPlant;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ –æ–∫–Ω–µ –ø—Ä–æ–¥–∞–∂–∏
            const sellingContent = document.querySelector('#sellingModal p');
            if (sellingContent) {
                sellingContent.textContent = trans.selectToSell;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            headerTitle.textContent = trans.title;
            headerSubtitle.textContent = trans.subtitle;
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        function setWelcomeLang(lang) {
            if (lang === 'ru') {
                document.getElementById('welcomeTextRu').style.display = 'block';
                document.getElementById('welcomeTextEn').style.display = 'none';
                document.getElementById('welcomeTitle').textContent = '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ GaGBot!';
                document.querySelector('#welcomeModal button:last-child').textContent = '–ù–∞—á–∞—Ç—å –∏–≥—Ä—É';
            } else {
                document.getElementById('welcomeTextRu').style.display = 'none';
                document.getElementById('welcomeTextEn').style.display = 'block';
                document.getElementById('welcomeTitle').textContent = 'Welcome to GaGBot!';
                document.querySelector('#welcomeModal button:last-child').textContent = 'Start Game';
            }
        }
        
        // –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
        function updateShopTimer() {
            if (shopRefreshTime > 0) {
                shopRefreshTime--;
                const minutes = Math.floor(shopRefreshTime / 60);
                const seconds = shopRefreshTime % 60;
                
                const timerElement = document.getElementById('shopTimer');
                if (timerElement) {
                    timerElement.innerHTML = `${translations[currentLang].refreshIn} ${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
                }
                
                setTimeout(updateShopTimer, 1000);
            } else {
                farm.updateShop();
                if (document.getElementById('shopModal').style.display === 'flex') {
                    openShop();
                }
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        window.onload = function() {
            updateUI();
            applyTranslations();
            updateShopTimer();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∏–≥—Ä–∞
            if (!localStorage.getItem('farmGame')) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ
                document.getElementById('welcomeModal').style.display = 'flex';
                setWelcomeLang('ru');
            }
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
            setInterval(() => {
                farm.saveGame();
            }, 10000);
        };
    </script>
</body>
</html>
